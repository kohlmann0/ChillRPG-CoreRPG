<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
	<windowclass name="charsheet_main">
		<margins control="0,0,0,2" />
		<sheetdata>
<!-- Attributes Column-->
			<frame_char name="attributesframe">
				<bounds>0,0,-1,200</bounds>
			</frame_char>
			<label_frametop name="attributesFrameLabel">
				<anchored to="attributesframe" position="insidetopleft" offset="10,10" />
				<static textres="char_label_attributes" />
			</label_frametop>


			<!-- Agility -->	
					
			<chill_attribute name="agilityValue" source="abilities.agility.score" frame="border">
				<anchored to="attributesframe" position="insidetopleft"  offset="15,35"  width="20" />
				<description><textres>char_label_agility</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>
			<stringcontrol name="agilitylabel">
				<anchored to="agilityValue" position="right" offset="5,0"  />
				<static textres="char_label_agility" />
			</stringcontrol>

			<!-- Strength -->
			<chill_attribute name="strengthValue" source="abilities.strength.score" >
				<anchored to="agilityValue" position="below" />
				<description><textres>char_label_strength</textres></description>	
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>			
			<stringcontrol name="strengthlabel">
				<anchored to="strengthValue" position="right" offset="5,0"/>
				<static textres="char_label_strength" />
			</stringcontrol>

			<!-- Stamina -->
			<chill_attribute name="staminaValue" source="abilities.stamina.score">
				<anchored to="strengthValue" position="below" />
				<description><textres>char_label_stamina</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>			
			<stringcontrol name="staminalabel">
				<anchored to="staminaValue" position="right" offset="5,0"/>
				<static textres="char_label_stamina" />
			</stringcontrol>

			<!-- focus -->
			<chill_attribute name="focusValue" source="abilities.focus.score">
				<anchored to="staminaValue" position="below" />
				<description><textres>char_label_focus</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>			
			<stringcontrol name="focuslabel">
				<anchored to="focusValue" position="right" offset="5,0"/>
				<static textres="char_label_focus" />
			</stringcontrol>

			<!-- personality -->
			<chill_attribute name="personalityValue" source="abilities.personality.score">
				<anchored to="focusValue" position="below" />
				<description><textres>char_label_personality</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>			
			<stringcontrol name="personalitylabel">
				<anchored to="personalityValue" position="right" offset="5,0"/>
				<static textres="char_label_personality" />
			</stringcontrol>

			<!-- willpower -->
			<chill_attribute name="willpowerValue" source="abilities.willpower.score">
				<anchored to="personalityValue" position="below" />
				<description><textres>char_label_willpower</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>						
			<stringcontrol name="willpowerlabel">
				<anchored to="willpowerValue" position="right" offset="5,0"/>
				<static textres="char_label_willpower" />
			</stringcontrol>

			<!-- dexterity -->
			<chill_attribute name="dexterityValue" source="abilities.dexterity.score">
				<anchored to="willpowerValue" position="below" />
				<description><textres>char_label_dexterity</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>			
			<stringcontrol name="dexteritylabel">
				<anchored to="dexterityValue" position="right" offset="5,0"/>
				<static textres="char_label_dexterity" />
			</stringcontrol>

			<!-- perception -->
			<chill_attribute name="perceptionValue" source="abilities.perception.score">
				<anchored to="dexterityValue" position="below" />
				<description><textres>char_label_perception</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>			
			<stringcontrol name="perceptionlabel">
				<anchored to="perceptionValue" position="right" offset="5,0"/>
				<static textres="char_label_perception" />
			</stringcontrol>

			<!-- reflexes -->
			<chill_attribute name="reflexesValue" source="abilities.reflexes.score">
				<anchored to="perceptionValue" position="below" />
				<description><textres>char_label_reflexes</textres></description>
				<script>					
					function getTargetValue()					
						return getValue()
					end
				</script>
			</chill_attribute>			
			<stringcontrol name="reflexeslabel">
				<anchored to="reflexesValue" position="right" offset="5,0"/>
				<static textres="char_label_reflexes" />
			</stringcontrol>




	


			<!-- Skills Column -->			
			<frame_char name="skillFrame">
				<bounds>140,0,-1,200</bounds>
			</frame_char>
			<!-- These are based off the base Attribute (ie. Agility), plus the skill value) -->
			<label_frametop name="skillsFrameLabel">
				<anchored to="skillFrame" position="insidetopleft" offset="10,10" />
				<static textres="char_label_skills" />
			</label_frametop>

			<!-- movement -->			
			<chill_attribute name="movementValue" source="abilities.movement.score">
				<anchored to="skillFrame" position="insidetopleft"  offset="10,35"  width="20" />
				<description><textres>char_label_movement</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("agility").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="movementlabel">
				<anchored to="movementValue" position="right" offset="5,0"  />
				<static textres="char_label_movement" />
			</stringcontrol>

			<!-- prowess -->			
			<chill_attribute name="prowessValue" source="abilities.prowess.score">
				<anchored to="movementValue" position="below"  />
				<description><textres>char_label_prowess</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("strength").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="prowesslabel">
				<anchored to="prowessValue" position="right" offset="5,0"  />
				<static textres="char_label_prowess" />
			</stringcontrol>

			<!-- closequarters -->			
			<chill_attribute name="closequartersValue" source="abilities.closequarters.score">
				<anchored to="prowessValue" position="below"  />
				<description><textres>char_label_closequarters</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("stamina").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="closequarterslabel">
				<anchored to="closequartersValue" position="right" offset="5,0"  />
				<static textres="char_label_closequarters" />
			</stringcontrol>

			<!-- research -->			
			<chill_attribute name="researchValue" source="abilities.research.score">
				<anchored to="closequartersValue" position="below"  />
				<description><textres>char_label_research</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("focus").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="researchlabel">
				<anchored to="researchValue" position="right" offset="5,0"  />
				<static textres="char_label_research" />
			</stringcontrol>

			<!-- communication -->			
			<chill_attribute name="communicationValue" source="abilities.communication.score">
				<anchored to="researchValue" position="below"  />
				<description><textres>char_label_communication</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("personality").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="communicationlabel">
				<anchored to="communicationValue" position="right" offset="5,0"  />
				<static textres="char_label_communication" />
			</stringcontrol>

			<!-- interview -->			
			<chill_attribute name="interviewValue" source="abilities.interview.score">
				<anchored to="communicationValue" position="below"  />
				<description><textres>char_label_interview</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("willpower").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="interviewlabel">
				<anchored to="interviewValue" position="right" offset="5,0"  />
				<static textres="char_label_interview" />
			</stringcontrol>

			<!-- fieldcraft -->			
			<chill_attribute name="fieldcraftValue" source="abilities.fieldcraft.score">
				<anchored to="interviewValue" position="below"  />
				<description><textres>char_label_fieldcraft</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("dexterity").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="fieldcraftlabel">
				<anchored to="fieldcraftValue" position="right" offset="5,0"  />
				<static textres="char_label_fieldcraft" />
			</stringcontrol>

			<!-- investigation -->			
			<chill_attribute name="investigationValue" source="abilities.investigation.score">
				<anchored to="fieldcraftValue" position="below"  />
				<description><textres>char_label_investigation</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("perception").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="investigationlabel">
				<anchored to="investigationValue" position="right" offset="5,0"  />
				<static textres="char_label_investigation" />
			</stringcontrol>

			<!-- rangedweapons -->			
			<chill_attribute name="rangedweaponsValue" source="abilities.rangedweapons.score">
				<anchored to="investigationValue" position="below"  />
				<description><textres>char_label_rangedweapons</textres></description>
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local baseValue = attributesNode.getChild("reflexes").getChild("score").getValue();
						return tonumber(baseValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringcontrol name="rangedweaponslabel">
				<anchored to="rangedweaponsValue" position="right" offset="5,0"  />
				<static textres="char_label_rangedweapons" />
			</stringcontrol>


			<!-- Specializations Column -->				
			<frame_char name="specializationFrame">
				<bounds>320,0,-1,200</bounds>
			</frame_char>
			<!-- These are based off the base Attribute and Skill (ie. Agility+Movement), plus the specialization value (Basic, Advanced, Expert)) -->
			<label_frametop name="specializationFrameLabel">
				<anchored to="specializationFrame" position="insidetopleft" offset="10,10" />
				<static textres="char_label_specializations" />
			</label_frametop>

			<!-- agilitySpec1 -->			
			<chill_attribute name="agilitySpec1" source="abilities.agilitySpec1.score">
				<anchored to="specializationFrame" position="insidetopleft" offset="10,35"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("agility").getChild("score").getValue();
						local skillValue = attributesNode.getChild("movement").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="agilitySpec1Label" width="200" height = "20">
				<anchored to="agilitySpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- agilitySpec2 -->			
			<chill_attribute name="agilitySpec2" source="abilities.agilitySpec2.score">
				<anchored to="agilitySpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("agility").getChild("score").getValue();
						local skillValue = attributesNode.getChild("movement").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="agilitySpec2Label" width="200" height = "20">
				<anchored to="agilitySpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- agilitySpec3 -->			
			<chill_attribute name="agilitySpec3" source="abilities.agilitySpec3.score">
				<anchored to="agilitySpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("agility").getChild("score").getValue();
						local skillValue = attributesNode.getChild("movement").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="agilitySpec3Label" width="200" height = "20">
				<anchored to="agilitySpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>


			<!-- strengthSpec1 -->			
			<chill_attribute name="strengthSpec1" source="abilities.strengthSpec1.score">
				<anchored to="agilitySpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("strength").getChild("score").getValue();
						local skillValue = attributesNode.getChild("prowess").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="strengthSpec1Label" width="200" height = "20">
				<anchored to="strengthSpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- strengthSpec2 -->			
			<chill_attribute name="strengthSpec2" source="abilities.strengthSpec2.score">
				<anchored to="strengthSpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("strength").getChild("score").getValue();
						local skillValue = attributesNode.getChild("prowess").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="strengthSpec2Label" width="200" height = "20">
				<anchored to="strengthSpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- strengthSpec3 -->			
			<chill_attribute name="strengthSpec3" source="abilities.strengthSpec3.score">
				<anchored to="strengthSpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("strength").getChild("score").getValue();
						local skillValue = attributesNode.getChild("prowess").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="strengthSpec3Label" width="200" height = "20">
				<anchored to="strengthSpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>

			
			<!-- staminaSpec1 -->			
			<chill_attribute name="staminaSpec1" source="abilities.staminaSpec1.score">
				<anchored to="strengthSpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("stamina").getChild("score").getValue();
						local skillValue = attributesNode.getChild("closequarters").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="staminaSpec1Label" width="200" height = "20">
				<anchored to="staminaSpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- staminaSpec2 -->			
			<chill_attribute name="staminaSpec2" source="abilities.staminaSpec2.score">
				<anchored to="staminaSpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("stamina").getChild("score").getValue();
						local skillValue = attributesNode.getChild("closequarters").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="staminaSpec2Label" width="200" height = "20">
				<anchored to="staminaSpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- staminaSpec3 -->			
			<chill_attribute name="staminaSpec3" source="abilities.staminaSpec3.score">
				<anchored to="staminaSpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("stamina").getChild("score").getValue();
						local skillValue = attributesNode.getChild("closequarters").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="staminaSpec3Label" width="200" height = "20">
				<anchored to="staminaSpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>

			
			<!-- focusSpec1 -->			
			<chill_attribute name="focusSpec1" source="abilities.focusSpec1.score">
				<anchored to="staminaSpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("focus").getChild("score").getValue();
						local skillValue = attributesNode.getChild("research").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="focusSpec1Label" width="200" height = "20">
				<anchored to="focusSpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- focusSpec2 -->			
			<chill_attribute name="focusSpec2" source="abilities.focusSpec2.score">
				<anchored to="focusSpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("focus").getChild("score").getValue();
						local skillValue = attributesNode.getChild("research").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="focusSpec2Label" width="200" height = "20">
				<anchored to="focusSpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- focusSpec3 -->			
			<chill_attribute name="focusSpec3" source="abilities.focusSpec3.score">
				<anchored to="focusSpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("focus").getChild("score").getValue();
						local skillValue = attributesNode.getChild("research").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="focusSpec3Label" width="200" height = "20">
				<anchored to="focusSpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>


			<!-- personalitySpec1 -->			
			<chill_attribute name="personalitySpec1" source="abilities.personalitySpec1.score">
				<anchored to="focusSpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("personality").getChild("score").getValue();
						local skillValue = attributesNode.getChild("communication").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="personalitySpec1Label" width="200" height = "20">
				<anchored to="personalitySpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- personalitySpec2 -->			
			<chill_attribute name="personalitySpec2" source="abilities.personalitySpec2.score">
				<anchored to="personalitySpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("personality").getChild("score").getValue();
						local skillValue = attributesNode.getChild("communication").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="personalitySpec2Label" width="200" height = "20">
				<anchored to="personalitySpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- personalitySpec3 -->			
			<chill_attribute name="personalitySpec3" source="abilities.personalitySpec3.score">
				<anchored to="personalitySpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("personality").getChild("score").getValue();
						local skillValue = attributesNode.getChild("communication").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="personalitySpec3Label" width="200" height = "20">
				<anchored to="personalitySpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>


			<!-- willpowerSpec1 -->			
			<chill_attribute name="willpowerSpec1" source="abilities.willpowerSpec1.score">
				<anchored to="personalitySpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("willpower").getChild("score").getValue();
						local skillValue = attributesNode.getChild("interview").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="willpowerSpec1Label" width="200" height = "20">
				<anchored to="willpowerSpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- willpowerSpec2 -->			
			<chill_attribute name="willpowerSpec2" source="abilities.willpowerSpec2.score">
				<anchored to="willpowerSpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("willpower").getChild("score").getValue();
						local skillValue = attributesNode.getChild("interview").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="willpowerSpec2Label" width="200" height = "20">
				<anchored to="willpowerSpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- willpowerSpec3 -->			
			<chill_attribute name="willpowerSpec3" source="abilities.willpowerSpec3.score">
				<anchored to="willpowerSpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("willpower").getChild("score").getValue();
						local skillValue = attributesNode.getChild("interview").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="willpowerSpec3Label" width="200" height = "20">
				<anchored to="willpowerSpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>


			<!-- dexteritySpec1 -->			
			<chill_attribute name="dexteritySpec1" source="abilities.dexteritySpec1.score">
				<anchored to="willpowerSpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("dexterity").getChild("score").getValue();
						local skillValue = attributesNode.getChild("fieldcraft").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="dexteritySpec1Label" width="200" height = "20">
				<anchored to="dexteritySpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- dexteritySpec2 -->			
			<chill_attribute name="dexteritySpec2" source="abilities.dexteritySpec2.score">
				<anchored to="dexteritySpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("dexterity").getChild("score").getValue();
						local skillValue = attributesNode.getChild("fieldcraft").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="dexteritySpec2Label" width="200" height = "20">
				<anchored to="dexteritySpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- dexteritySpec3 -->			
			<chill_attribute name="dexteritySpec3" source="abilities.dexteritySpec3.score">
				<anchored to="dexteritySpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("dexterity").getChild("score").getValue();
						local skillValue = attributesNode.getChild("fieldcraft").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="dexteritySpec3Label" width="200" height = "20">
				<anchored to="dexteritySpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>


			<!-- perceptionSpec1 -->			
			<chill_attribute name="perceptionSpec1" source="abilities.perceptionSpec1.score">
				<anchored to="dexteritySpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("perception").getChild("score").getValue();
						local skillValue = attributesNode.getChild("investigation").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="perceptionSpec1Label" width="200" height = "20">
				<anchored to="perceptionSpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- perceptionSpec2 -->			
			<chill_attribute name="perceptionSpec2" source="abilities.perceptionSpec2.score">
				<anchored to="perceptionSpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("perception").getChild("score").getValue();
						local skillValue = attributesNode.getChild("investigation").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="perceptionSpec2Label" width="200" height = "20">
				<anchored to="perceptionSpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- perceptionSpec3 -->			
			<chill_attribute name="perceptionSpec3" source="abilities.perceptionSpec3.score">
				<anchored to="perceptionSpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("perception").getChild("score").getValue();
						local skillValue = attributesNode.getChild("investigation").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="perceptionSpec3Label" width="200" height = "20">
				<anchored to="perceptionSpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>




			<!-- reflexesSpec1 -->			
			<chill_attribute name="reflexesSpec1" source="abilities.reflexesSpec1.score">
				<anchored to="perceptionSpec1" position="below"/>
				<default>15</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("reflexes").getChild("score").getValue();
						local skillValue = attributesNode.getChild("rangedweapons").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="reflexesSpec1Label" width="200" height = "20">
				<anchored to="reflexesSpec1" position="right" offset="5,0"  />
				<empty><textres>char_label_beginner</textres></empty>
				<controlline />
			</stringfield>

			<!-- reflexesSpec2 -->			
			<chill_attribute name="reflexesSpec2" source="abilities.reflexesSpec2.score">
				<anchored to="reflexesSpec1Label" position="right" offset="5,0"/>
				<default>30</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("reflexes").getChild("score").getValue();
						local skillValue = attributesNode.getChild("rangedweapons").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="reflexesSpec2Label" width="200" height = "20">
				<anchored to="reflexesSpec2" position="right" offset="5,0"  />
				<empty><textres>char_label_expert</textres></empty>
				<controlline />
			</stringfield>
			
			<!-- reflexesSpec3 -->			
			<chill_attribute name="reflexesSpec3" source="abilities.reflexesSpec3.score">
				<anchored to="reflexesSpec2Label" position="right" offset="5,0"/>
				<default>50</default>
				<nokeyedit />				
				<nodrop />
				<noreset />
				<script>					
					function getTargetValue()					
						local attributesNode = self.getDatabaseNode().getParent().getParent();
						local atrributeValue = attributesNode.getChild("reflexes").getChild("score").getValue();
						local skillValue = attributesNode.getChild("rangedweapons").getChild("score").getValue();
						return tonumber(atrributeValue) + tonumber(skillValue) + getValue();
					end
				</script>
			</chill_attribute>
			<stringfield name="reflexesSpec3Label" width="200" height = "20">
				<anchored to="reflexesSpec3" position="right" offset="5,0"  />
				<empty><textres>char_label_master</textres></empty>
				<controlline />
			</stringfield>



			<!-- Damage Column -->
			<frame_char name="damageFrame">
				<bounds>-150,0,-1,200</bounds>
			</frame_char>
			<!-- These are based off the base Attribute and Skill (ie. Agility+Movement), plus the specialization value (Basic, Advanced, Expert)) -->
			<label_frametop name="damageFrameLabel">
				<anchored to="damageFrame" position="insidetopleft" offset="10,10" width ="150"/>
				<static textres="char_label_damage" />
			</label_frametop>
			<stringcontrol name="damageSuperficial">
				<anchored to="damageFrameLabel" position="below"  />
				<static textres="damage_label_superficial" />
				<script>
					function onDoubleClick(x, y)	
						Debug.chat("Add some Damage Here")
					end
					
					function onClick(x, y)	
						Debug.chat("Reset ME")
					end
				</script>
			</stringcontrol>
			<stringcontrol name="damageMinor">
				<anchored to="damageSuperficial" position="below"  />
				<static textres="damage_label_minor" />
				<script>
					function onDoubleClick(x, y)	
						Debug.chat("Add some Damage Here")
					end
				</script>
			</stringcontrol>			
			<stringcontrol name="damageSerious">
				<anchored to="damageMinor" position="below"  />
				<static textres="damage_label_serious" />
				<script>
					function onDoubleClick(x, y)	
						Debug.chat("Add some Damage Here")
					end
				</script>
			</stringcontrol>			
			<stringcontrol name="damageMajor">
				<anchored to="damageSerious" position="below"  />
				<static textres="damage_label_major" />
				<script>
					function onDoubleClick(x, y)	
						Debug.chat("Add some Damage Here")
					end
				</script>
			</stringcontrol>			
			<stringcontrol name="damageCritical">
				<anchored to="damageMajor" position="below"  />
				<static textres="damage_label_critical" />
				<script>
					function onDoubleClick(x, y)	
						Debug.chat("Add some Damage Here")
					end
				</script>
			</stringcontrol>
			<stringcontrol name="damageLethal">
				<anchored to="damageCritical" position="below"  />
				<static textres="damage_label_lethal" />
				<script>
					function onDoubleClick(x, y)	
						Debug.chat("Add some Damage Here")
					end
				</script>
			</stringcontrol>



			<!-- Bottom-half of the sheet  -->
			<frame_char name="artsFrame">
				<bounds>0,200,-1,100</bounds>
			</frame_char>
			<!-- the Art -->
			<label_frametop name="theArtFrameLabel">
				<anchored to="artsFrame" position="insidetopleft" offset="10,10" />
				<static textres="char_label_the_art" />
			</label_frametop>
			<stringu name="theArtField" source="theArtField" >		
				<anchored to="artsFrame">
					<top offset="30" />
					<left offset="15" />
					<right offset="-20" />
					<bottom offset="-3" />
				</anchored>
				<!-- <anchored to="artsFrame" position="insidetopleft" offset="10,25,-20,-1" /> -->
				<multilinespacing>20</multilinespacing>
			</stringu>
			<scrollbar_list>
				<anchored to="theArtField" />
				<target>theArtField</target>
			</scrollbar_list>


			<!-- Edges and Drawbacks - Just a list, no automation or mechanics -->
			<frame_char name="edgesFrame">
				<bounds>0,300,-1,100</bounds>
			</frame_char>
			<label_frametop name="edgesFrameLabel">
				<anchored to="edgesFrame" position="insidetopleft" offset="10,10" />
				<static textres="char_label_edges" />
			</label_frametop>			
			<stringu name="edgesField" source="edgesField" >			
				<anchored to="edgesFrame">
					<top offset="30" />
					<left offset="15" />
					<right offset="-20" />
					<bottom offset="-3" />
				</anchored>
				<!-- <anchored to="edgesFrame" position="insidetopleft" offset="10,25,-20,-1"  /> -->
				<multilinespacing>20</multilinespacing>
			</stringu>
			<scrollbar_list>
				<anchored to="edgesField" />
				<target>edgesField</target>
			</scrollbar_list>

			<!-- Drives - checkboxes for something -->
			<frame_char name="driveFrame">
				<bounds>0,400,-1,100</bounds>
			</frame_char>
			<label_frametop name="drivesFrameLabel">
				<anchored to="driveFrame" position="insidetopleft" offset="10,10" />
				<static textres="char_label_drives" />
			</label_frametop>
			<stringu name="driveField" >			
				<anchored to="driveFrame">
					<top offset="30" />
					<left offset="15" />
					<right offset="-20" />
					<bottom offset="-3" />
				</anchored>
				<!-- <anchored to="driveFrame" position="insidetopleft" offset="10,25,-20,-1"  /> -->				
				<multilinespacing>20</multilinespacing>
			</stringu>			
			<scrollbar_list>
				<anchored to="driveField" />
				<target>driveField</target>
			</scrollbar_list>


			<!-- History - checkboxes for something -->
			<frame_char name="historyFrame">
				<bounds>0,500,-1,100</bounds>
			</frame_char>
			<label_frametop name="historyFrameLabel">
				<anchored to="historyFrame" position="insidetopleft" offset="10,10" />
				<static textres="char_label_history" />
			</label_frametop>
			<stringu name="historyField">		
				<anchored to="historyFrame">
					<top offset="30" />
					<left offset="15" />
					<right offset="-20" />
					<bottom offset="-3" />
				</anchored>
				<!-- <anchored to="historyFrame" position="insidetopleft" offset="10,25,-20,-1"  /> -->
				<multilinespacing>20</multilinespacing>
			</stringu>	
			<scrollbar_list>
				<anchored to="historyField" />
				<target>historyField</target>
			</scrollbar_list>

		</sheetdata>
	</windowclass>



	<!-- Chill Specific templates-->
	<template name="chill_attribute">
		<numberfield name="attributevalue" >
			<min>0</min>
			<max>100</max>
			<nodrop/>
			<noreset/>	
			<script>
				--function onInit(x, y)
				--	Debug.chat("OnInit - " .. getName());
				--end				
				function onGainFocus()
					setFrame("rowshade");
				end
				function onLoseFocus()
					setFrame(nil);
				end
				function onHover(bOnWindow)
					if not bOnWindow and not self.hasFocus() then
						setFrame(nil);
					else
						setFrame("rowshade");
					end
				end


				function onDoubleClick(x, y)				
					-- Each individual control should either override this, or override the "getTargetValue()" method.
					local targetValue = self.getTargetValue()
					self.rollMe(x,y,targetValue)
				end

				--function onDragStop(button, x, y, draginfo)
				--	local description = string.upper(self.getDatabaseNode().getParent().getName()) .. " CHECK (target: ".. targetValue .. ")"					
				--	local rRoll = self.createDice(description, targetValue)
				--	return true;
				--end



				function rollMe(x, y, targetValue)
					local description = string.upper(self.getDatabaseNode().getParent().getName()) .. " CHECK (target: ".. targetValue .. ")"					
					local rRoll = self.createDice(description, targetValue)
					ActionsManager.performAction(nil, nil, rRoll);
				end			

				function createDice(description, targetValue)
					-- This roll is specific to the CHILL RPG system.
					-- It is a roll-under system on a d100, with the target number being a combination of certain stats.
					-- There are additional bonuses for doubles, and being above or below half the target number.
					local rRoll = { 
						sType = "dice", 
						sDesc = description, 
						aDice = {"d100"}, 
						nMod = 0,
						nTarget = tonumber(targetValue) };
					return rRoll;
				end
			</script>			
		</numberfield>			
	</template>




	<windowclass name="char_main_category_header">
		<margins control="0,0,0,5" />
		<backcolor>4040301E</backcolor>
		<sheetdata>
			<genericcontrol name="leftanchor">
				<anchored height="0" width="0">
					<top offset="5" />
					<left offset="10" />
				</anchored>
			</genericcontrol>

			<genericcontrol name="rightanchor">
				<anchored height="0" width="0">
					<top offset="5" />
					<right offset="-10" />
				</anchored>
			</genericcontrol>
			
			<stringfield name="label">
				<anchored>
					<top offset="5" />
					<left offset="30" />
					<right offset="-30" />
				</anchored>
				<stateframe>
					<keyedit name="fieldfocus" offset="7,5,7,5" />
					<hover name="fieldfocus" offset="7,5,7,5" hidereadonly="true" />
					<drophilight name="fieldfocus" offset="7,5,7,5" hidereadonly="true" />
				</stateframe>
				<font>reference-b-large</font>
				<multilinespacing>20</multilinespacing>
				<center />
			</stringfield>
		</sheetdata>
	</windowclass>
	
	<windowclass name="char_main_category">
		<margins control="0,0,0,5" />
		<sheetdata>
			<subwindow name="header">
				<anchored position="insidetop">
				</anchored>
				<class>char_main_category_header</class>
				<fastinit />
				<activate />
			</subwindow>

			<button_iadd name="attributes_iadd">
				<anchored position="insidetopleft" offset="15,5" />
				<target>attributes</target>
			</button_iadd>
			<button_idelete name="idelete">
				<anchored position="insidetopright" offset="15,5" />
				<editmode>categories_iedit</editmode>
			</button_idelete>

			<list_charmainattribute name="attributes">
				<anchored>
					<top parent="header" anchor="bottom" offset="2" />
					<left />
					<right />
				</anchored>
			</list_charmainattribute>
		</sheetdata>
	</windowclass>



	<windowclass name="char_attribute">
		<margins control="0,0,0,3" />
		<script>
			function onDragStart(button, x, y, draginfo)
				if label.isEmpty() and dice.isEmpty() and bonus.getValue() == 0 then
					return nil;
				end

				if dice.isEmpty() then
					draginfo.setType("number");
					draginfo.setDescription(label.getValue());
					draginfo.setStringData(label.getValue());
					draginfo.setNumberData(bonus.getValue());
				else
					local rRoll = { sType = "dice", sDesc = label.getValue(), aDice = dice.getDice(), nMod = bonus.getValue() };
					ActionsManager.performAction(draginfo, nil, rRoll);
				end
				return true;
			end
			
			function onDoubleClick(x, y)
				if dice.isEmpty() then
					ModifierStack.addSlot(label.getValue(), bonus.getValue());
				else
					local rRoll = { sType = "dice", sDesc = label.getValue(), aDice = dice.getDice(), nMod = bonus.getValue() };
					ActionsManager.performAction(nil, nil, rRoll);
				end
				return true;
			end

			function onDrop(x, y, draginfo)
				local sDragType = draginfo.getType();
				if sDragType == "dice" then
					local aDropDice = draginfo.getDiceData();
					for _,vDie in ipairs(aDropDice) do
						dice.addDie(vDie.type);
					end
					return true;
				end
			end
		</script>
		<sheetdata>
			<genericcontrol name="rightanchor">
				<anchored height="0" width="0">
					<top offset="2" />
					<right />
				</anchored>
			</genericcontrol>
			<button_idelete name="idelete">
				<anchored to="rightanchor">
					<top />
					<right anchor="left" relation="relative" offset="-5" />
				</anchored>
				<editmode>categories_iedit</editmode>
			</button_idelete>

			<basicnumber name="bonus">
				<anchored to="rightanchor" width="30" height="20">
					<top />
					<right anchor="left" relation="relative" offset="-7" />
				</anchored>
				<tabtarget prev="label" />
				<script>
					function onDragStart(button, x, y, draginfo)
						return window.onDragStart(button, x, y, draginfo);
					end

					function onDoubleClick(x, y)
						return window.onDoubleClick(x, y);
					end

					function onGainFocus()
						window.setFrame("rowshade");
					end

					function onLoseFocus()
						window.setFrame(nil);
					end
				</script>
			</basicnumber>
			<basicdice name="dice">
				<anchored to="rightanchor" width="30" height="20">
					<top />
					<right anchor="left" relation="relative" offset="-10" />
				</anchored>
				<frame name="fielddark" offset="7,5,7,5" />
				<invisible />
				<script>
					function onInit()
						onValueChanged();
					end
					
					function onValueChanged()
						setVisible(not isEmpty());
					end

					function onDragStart(button, x, y, draginfo)
						return window.onDragStart(button, x, y, draginfo);
					end

					function onDoubleClick(x, y)
						return window.onDoubleClick(x, y);
					end
				</script>
			</basicdice>
			<string_textlistitem name="label">
				<anchored position="insidetopleft" offset="5,2" height="20">
					<right parent="rightanchor" anchor="left" relation="relative" offset="-10" />
				</anchored>
				<tabtarget next="bonus" />
				<script>
					function onDragStart(button, x, y, draginfo)
						return window.onDragStart(button, x, y, draginfo);
					end

					function onDoubleClick(x, y)
						return window.onDoubleClick(x, y);
					end
				</script>
			</string_textlistitem>
		</sheetdata>
	</windowclass>
</root>
